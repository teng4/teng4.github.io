---
title: 'How To convert [xacro] to [urdf] for Franka Emika Panda robot?'
date: 2025-04-16
permalink: /posts/20250416/
tags:
  - Panda
  - URDF
  - Franka Emika
  - xacro
  - rviz
---

(20250416).

# How To convert [.xacro] to [.urdf] for Panda robot?

The post describes how you can convert the `.xacro` file to `.urdf` file for the **Franka Emika** Panda robot.

Environment:

- ROS1
- rosdistro: noetic
- Ubuntu 20.04.6 LTS
- source [franka_description](https://github.com/frankaemika/franka_description)
- improved [franka_description](https://github.com/teng4/franka_description) with URDF generated.



## STEP-0: Install Docker

Docker is required for the process of `xacro` -> `URDF`.

```
$ sudo apt update
$ sudo apt install docker.io
$ sudo systemctl enable docker
$ sudo systemctl start docker
$ newgrp docker
$ whoami #This will output the USERNAME
$ sudo usermod -aG docker USERNAME
$ groups #should have "docker" as one output
$ sudo reboot #reboot or logout-login the PC is required.
$ docker run hello-world
```


## STEP-1: create panda urdf from xacro, need to do:

(1.0) Put the original folder [franka_description](https://github.com/frankaemika/franka_description) into a valid `catkin_ws`, ensure the subfolder "scripts (create_urdf.sh)" exists, which is the code will be used to create URDF files later.

(1.1) Commands for generating `URDF` from Franka's `xacro`.

NOTE-1: Docker is required.

NOTE-2: **DO NOT** use `abs-path`, it may have problems when using the `URDF` later.

```
# Start the generation of the urdf model
$ ./scripts/create_urdf.sh <robot_id> <ee_id>
id of the robot model: fr3, fp3, fer, multi_arm, none
id of the robot end effector: franka_hand, cobot_pump
# Run the following inside "USERNAME@RT6958U-NESR:~/catkin_ws4/src/franka_description$"
# NOTE: **DO NOT** use `abs-path`, it will have problems when using the URDF later.
$ ./scripts/create_urdf.sh fr3 --robot-ee franka_hand --with-sc --abs-path --no-prefix 
$ ./scripts/create_urdf.sh fr3 --robot-ee franka_hand --with-sc --no-prefix
$ ./scripts/create_urdf.sh fp3 --robot-ee franka_hand --with-sc --no-prefix
$ ./scripts/create_urdf.sh fer --robot-ee franka_hand --with-sc --no-prefix
$ ./scripts/create_urdf.sh multi_arm --robot-ee franka_hand --with-sc --no-prefix
```

(1.2) If cmd in (1.1) does not work, Run the following inside "USERNAME@RT6958U-NESR:~/catkin_ws4/src/franka_description$"

```
$ python3 ./scripts/create_urdf.py fr3 --robot-ee franka_hand --with-sc --no-prefix
$ python3 ./scripts/create_urdf.py fp3 --robot-ee franka_hand --with-sc --no-prefix
$ python3 ./scripts/create_urdf.py fer --robot-ee franka_hand --with-sc --no-prefix
$ python3 ./scripts/create_urdf.py multi_arm --robot-ee franka_hand --with-sc --no-prefix
$ python3 ./scripts/create_urdf.py fr3 --robot-ee cobot_pump --with-sc --no-prefix
$ python3 ./scripts/create_urdf.py fr3 --robot-ee cobot_pump --with-sc --no-prefix
```

(2) In the newly generated `URDF` file, need to do:

(2.1) Need to correct one conversion mistake for `"fr3_link8"` -> `"link8"`.

(2.2) The last two fingers `"prismatic"` -> `"fixed"`, otherwise it will have few related errors in rviz.


## STEP-2: panda in rviz need to do:

(1) Link names do not matter.

(2) Robot Description: `/panda1/robot_description`

(3) Fixed Frame: `link0`


## STEP-3: panda in cpp need to do:

(1) Ensure the joint names are exactly the same as the ones in the `URDF` file.

(2) The publish topic name will be `/panda1/joint_states`.


## STEP-4: if all ok, double check with:

```
$ rosrun rqt_tf_tree rqt_tf_tree
```


## (optional) STEP-5: visualize panda via the original franka code:

```
# Run the following inside "USERNAME@RT6958U-NESR:~/catkin_ws4/src/franka_description$"
$ ./scripts/visualize_franka.sh arm_id:=<robot_id> 
$ ./scripts/visualize_franka.sh arm_id:=fr3 #it will show a realistic white franka robot in rviz.
$ ./scripts/visualize_franka.sh arm_id:=fp3 #it will show a realistic black franka robot in rviz.
$ ./scripts/visualize_franka.sh arm_id:=fer #it will show a realistic white franka robot in rviz.
```


------
Created on 2025-04-16.
